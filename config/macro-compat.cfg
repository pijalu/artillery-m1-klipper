# =================================
# Artillery M1 - Compatibility Macros
# =================================
# This file contains deprecated macros that are kept for backward compatibility.
# These macros call the new implementations with appropriate parameters.
# 
# Any macro in this file is considered deprecated and should not be used in new code.
# They exist only to ensure existing slicer profiles and scripts continue to work.

[gcode_macro nozzle_clean_by_liu]
description: Compatibility macro for nozzle_clean_by_liu - calls the unified nozzle_clean macro
gcode:
  nozzle_clean TYPE=standard TEMP=250

[gcode_macro nozzle_clean_before_resume_by_liu]
description: Compatibility macro for nozzle_clean_before_resume_by_liu - calls the unified nozzle_clean macro
gcode:
  nozzle_clean TYPE=before_resume

[gcode_macro nozzle_clean_after_cut]
description: Compatibility macro for nozzle_clean_after_cut - calls the unified nozzle_clean macro
gcode:
  nozzle_clean TYPE=after_cut TEMP=220

[gcode_macro _extra_fila]
description: Compatibility macro for _extra_fila - calls the unified extrude_filament macro
gcode:
  extrude_filament LENGTH=80 TEMP=250 MOVE_TO_COLLECTION=False
  M106 S160
  G4 P1000
  _filament_scrape
  G1 X195 Y275 F30000
  G1 X137 Y275 F3000
  M400

[gcode_macro extru_fila_work_flow_1]
description: Compatibility macro for extru_fila_work_flow_1 - calls the unified extrude_filament macro
gcode:
  extrude_filament LENGTH=40 TEMP=250 MOVE_TO_COLLECTION=True

[gcode_macro _move_to_collection_box_before_print_by_liu]
description: Compatibility macro for _move_to_collection_box_before_print_by_liu
gcode:
  G28
  G90
  G1 X200 Y260 F6000
  G1 X200 Y275 F6000
  G1 X160 Y275 F6000
  G1 X137 Y275 F3000
  M400

[gcode_macro _move_to_collection_box_by_liu]
description: Compatibility macro for _move_to_collection_box_by_liu
gcode:
  ;===== Lift and return to zero =====================
  G91
  G1 Z5 F120
  G90
  G28
  M400
  ;===== Move to discharge port =====================
  G90
  G1 X200 Y260 F6000
  G1 X200 Y275 F6000
  G1 X160 Y275 F6000
  G1 X137 Y275 F3000
  M400

[gcode_macro _move_to_collection_box_no_g28]
description: Compatibility macro for _move_to_collection_box_no_g28
gcode:
  G90
  M400
  G1 X200 Y260 F6000
  G1 X200 Y275 F6000
  G1 X160 Y275 F6000
  G1 X137 Y275 F3000
  M400

[gcode_macro _move_to_collection_box]
description: Compatibility macro for _move_to_collection_box
gcode:
  G28
  M400
  G1 X200 Y260 F6000
  G1 X200 Y275 F6000
  G1 X160 Y275 F6000
  G1 X137 Y275 F3000
  M400

[gcode_macro _move_to_collection_box_after_fila_out]
description: Compatibility macro for _move_to_collection_box_after_fila_out
gcode:
  ;by_liu
  M104 S140
  SET_VELOCITY_LIMIT VELOCITY=650
  SET_VELOCITY_LIMIT ACCEL=15000
  ;===== Move to the Material Collection Area =====================
  G91
  G1 Z0.4 F600
  M400
  G90
  G1 X200 Y260 F6000
  G1 X200 Y275 F6000
  G1 X160 Y275 F6000
  G1 X137 Y275 F3000
  M400

[gcode_macro _waste_filament]
description: Compatibility macro for _waste_filament
gcode:
  G1 X158 Y276 F5000
  G1 X137 Y276 F5000
  G1 X158 Y276 F5000
  G1 X137 Y276 F5000

[gcode_macro _cut_filament]
description: Compatibility macro for _cut_filament
gcode:
  G28 X Y
  G90
  G1 X266 Y100 F6000
  G1 Y10 F6000
  G1 X266 Y-1 F600
  G1 Y10 F6000
  M400
  G92 E0
  G1 E-3 F300
  G1 X250 Y10 F12000
  M400

[gcode_macro _retract_filament]
description: Compatibility macro for _retract_filament
gcode:
  M83
  G1 E-5 F600
  G1 E10 F600
  G28 X Y
  G1 X50 Y150 F6000
  G1 E-5 F600
  G1 E10 F600
  G1 E-200 F600

[gcode_macro clean_fila_after_extru]
description: Compatibility macro for clean_fila_after_extru
gcode:
  ;===== Cut the Filament by Scraping =====================
  M104 S140
  M106 S160
  G4 P3000
  _filament_scrape
  G1 X195 Y275 F30000
  M400
  M106 S0
  M104 S0
  ;===== Move to the Material Collection Area =====================
  G90
  _move_to_collection_area

[gcode_macro _move_to_wait_for_cut_fila]
description: Compatibility macro for _move_to_wait_for_cut_fila
gcode:
  G1 X200 Y260 F6000
  G1 Y30 F6000
  M400
  G1 X260 F6000

[gcode_macro first_pumpback_fila_after_cut]
description: Compatibility macro for first_pumpback_fila_after_cut
gcode:
  G92 E0
  G1 E-3 F600
  M400

  G91
  G1 X-10  F600
  M400
  G90
  G1 X200 Y260 F6000
  G1 X200 Y275 F6000
  G1 X160 Y275 F6000
  G1 X137 Y275 F3000
  M400

[gcode_macro second_pumpback_fila_after_cut]
description: Compatibility macro for second_pumpback_fila_after_cut
gcode:
  G92 E0
  G1 E-80 F600
  M400